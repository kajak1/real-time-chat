{"version":3,"sources":["script.js"],"names":["socket","io","form","document","querySelector","mess","nick","ul","typingInfo","user","name","status","askForName","prompt","emit","value","typingTimeout","typing","userTyping","timeout","delay","clearTimeout","setTimeout","addTypingInfo","textContent","newUserUpdate","console","log","handleFormSubmission","e","preventDefault","data","message","author","addChatMessage","msg","innerHTML","addEventListener","on"],"mappings":";AAAA,IAAMA,EAASC,KACTC,EAAOC,SAASC,cAAc,QAC9BC,EAAOF,SAASC,cAAc,MAC9BE,EAAOH,SAASC,cAAc,MAC9BG,EAAKJ,SAASC,cAAc,aAC5BI,EAAaL,SAASC,cAAc,WAEpCK,EAAO,CACXC,KAAM,GACNC,OAAQ,IAGV,SAASC,IACPH,EAAKC,KAAOG,OAAO,mBACF,IAAbJ,EAAKC,MACPV,EAAOc,KAAK,aAAcL,EAAKC,MAEjCJ,EAAKS,MAAQN,EAAKC,KAGpB,SAASM,IACPC,QAAS,EACTjB,EAAOc,KAAK,cAAeG,QAG7B,IAAMC,EAAc,WACdD,IAAAA,GAAS,EACTE,EAAU,KACP,OAAA,SAAUC,GACfH,GAAS,EACTjB,EAAOc,KAAK,cAAe,CAAEG,OAAQA,EAAQR,KAAMA,EAAKC,OACxDW,aAAaF,GACbA,EAAUG,WAAWN,EAAeI,IAPpB,GAWpB,SAASG,EAAgC,GAAhBN,IAAAA,EAAAA,EAAAA,OAAQR,EAAAA,EAAAA,KAE7BD,EAAWgB,YADTP,EAC0BR,GAAAA,OAAAA,EAA5B,iBAEyB,GAI7B,SAASgB,IACPC,QAAQC,IAAI,mBAGd,SAASC,EAAqBC,GAExBxB,GADJwB,EAAEC,iBACgB,IAAdzB,EAAKU,OAA6B,IAAdT,EAAKS,MAAa,CAClCgB,IAAAA,EAAO,CAAEC,QAAS3B,EAAKU,MAAOkB,OAAQ3B,EAAKS,OACjDV,EAAKU,MAAQ,GACbf,EAAOc,KAAK,eAAgBiB,IAKhC,SAASG,EAAeC,GACdH,IAAAA,EAAoBG,EAApBH,QAASC,EAAWE,EAAXF,OACjB1B,EAAG6B,WAAoBH,OAAAA,OAAAA,EAAWD,MAAAA,OAAAA,EAAlC,SACAxB,EAAWgB,YAAc,GAG3BZ,IAEAV,EAAKmC,iBAAiB,SAAUT,GAChCvB,EAAKgC,iBAAiB,QAAS,WAC7BnB,EAAW,QAGblB,EAAOsC,GAAG,eAAgBJ,GAC1BlC,EAAOsC,GAAG,cAAef,GACzBvB,EAAOsC,GAAG,WAAYb","file":"script.js","sourceRoot":"..\\user\\public","sourcesContent":["const socket = io();\r\nconst form = document.querySelector('form');\r\nconst mess = document.querySelector('#m');\r\nconst nick = document.querySelector('#n');\r\nconst ul = document.querySelector('.messages');\r\nconst typingInfo = document.querySelector('.typing');\r\n\r\nconst user = {\r\n  name: '',\r\n  status: '',\r\n};\r\n\r\nfunction askForName() {\r\n  user.name = prompt('enter your name');\r\n  if (user.name != '') {\r\n    socket.emit('user login', user.name);\r\n  }\r\n  nick.value = user.name;\r\n}\r\n\r\nfunction typingTimeout() {\r\n  typing = false;\r\n  socket.emit('user typing', typing);\r\n}\r\n\r\nconst userTyping = (function () {\r\n  let typing = false;\r\n  let timeout = null;\r\n  return function (delay) {\r\n    typing = true;\r\n    socket.emit('user typing', { typing: typing, user: user.name });\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(typingTimeout, delay);\r\n  };\r\n})();\r\n\r\nfunction addTypingInfo({ typing, user }) {\r\n  if (typing) {\r\n    typingInfo.textContent = `${user} is typing...`;\r\n  } else {\r\n    typingInfo.textContent = '';\r\n  }\r\n}\r\n\r\nfunction newUserUpdate() {\r\n  console.log('new user joined');\r\n}\r\n\r\nfunction handleFormSubmission(e) {\r\n  e.preventDefault();\r\n  if (mess.value != '' && nick.value != '') {\r\n    const data = { message: mess.value, author: nick.value };\r\n    mess.value = '';\r\n    socket.emit('chat message', data);\r\n    // return false;\r\n  }\r\n}\r\n\r\nfunction addChatMessage(msg) {\r\n  const { message, author } = msg;\r\n  ul.innerHTML += `<li>${author}: ${message}</li>`;\r\n  typingInfo.textContent = '';\r\n}\r\n\r\naskForName();\r\n\r\nform.addEventListener('submit', handleFormSubmission);\r\nmess.addEventListener('input', () => {\r\n  userTyping(1500);\r\n});\r\n\r\nsocket.on('chat message', addChatMessage);\r\nsocket.on('user typing', addTypingInfo);\r\nsocket.on('new user', newUserUpdate);\r\n"]}
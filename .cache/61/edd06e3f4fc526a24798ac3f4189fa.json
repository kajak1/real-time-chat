{"id":"Focm","dependencies":[{"name":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\package.json","includedInParent":true,"mtime":1601662675194},{"name":"socket.io-client","loc":{"line":1,"column":15},"parent":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\user\\public\\index.js","resolved":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\node_modules\\socket.io-client\\lib\\index.js"},{"name":"../List","loc":{"line":2,"column":17},"parent":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\user\\public\\index.js","resolved":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\user\\List.js"}],"generated":{"js":"\"use strict\";var e=t(require(\"socket.io-client\")),n=t(require(\"../List\"));function t(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(),u=document.querySelector(\"form\"),o=document.querySelector(\"#m\"),i=document.querySelector(\"#n\"),a=document.querySelector(\".messages\"),c=document.querySelector(\".typing-cont\"),l=new n.default,s={name:name,rooms:[],activeRoom:\"global\"};function m(){var e=prompt(\"enter your name\");\"\"!=e&&r.emit(\"user login\",{username:e}),s.name=e,s.rooms.push(\"global\"),i.value=e}function d(e){var n=c.querySelector(\"#\".concat(e));null!=n&&c.removeChild(n)}function v(){r.emit(\"user typing\",{isTyping:!1,user:s})}var y=function(){var e=null;return function(n){r.emit(\"user typing\",{isTyping:!0,user:s}),clearTimeout(e),e=setTimeout(v,n)}}();function f(e){var n,t=e.isTyping,r=e.user.name;null==c.querySelector(\"#\".concat(r))?(n=document.createElement(\"li\")).setAttribute(\"id\",r):n=c.querySelector(\"#\".concat(r)),t?(n.textContent=\"\".concat(r,\" is typing...\"),c.appendChild(n)):d(r)}function g(e){if(e.preventDefault(),\"\"!=o.value&&\"\"!=i.value){var n={message:o.value,user:s,html:\"<li>\".concat(s.name,\": \").concat(o.value,\"</li>\")};o.value=\"\",r.emit(\"chat new message\",n)}}function p(e){var n=e.allMsg,t=e.user;a.innerHTML=n,d(t)}m(),u.addEventListener(\"submit\",g),o.addEventListener(\"input\",function(){y(4e3)}),r.on(\"chat new message\",p),r.on(\"user typing\",f),r.on(\"new user\",l.addUser.bind(l)),r.on(\"remove user\",l.removeUser.bind(l));"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":0}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":17}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":19}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":29}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":50}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":52}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":54}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":62}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":74}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":83}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":85}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":88}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":95}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":98}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":100}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":111}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":113}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":114}},{"source":"index.js","original":{"line":95,"column":0},"generated":{"line":1,"column":122}},{"source":"index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":125}},{"source":"index.js","name":"socket","original":{"line":4,"column":6},"generated":{"line":1,"column":129}},{"source":"index.js","original":{"line":4,"column":15},"generated":{"line":1,"column":132}},{"source":"index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":134}},{"source":"index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":136}},{"source":"index.js","name":"form","original":{"line":5,"column":6},"generated":{"line":1,"column":147}},{"source":"index.js","name":"document","original":{"line":5,"column":13},"generated":{"line":1,"column":149}},{"source":"index.js","name":"querySelector","original":{"line":5,"column":22},"generated":{"line":1,"column":158}},{"source":"index.js","original":{"line":5,"column":36},"generated":{"line":1,"column":172}},{"source":"index.js","name":"mess","original":{"line":6,"column":6},"generated":{"line":1,"column":180}},{"source":"index.js","name":"document","original":{"line":6,"column":13},"generated":{"line":1,"column":182}},{"source":"index.js","name":"querySelector","original":{"line":6,"column":22},"generated":{"line":1,"column":191}},{"source":"index.js","original":{"line":6,"column":36},"generated":{"line":1,"column":205}},{"source":"index.js","name":"nick","original":{"line":7,"column":6},"generated":{"line":1,"column":211}},{"source":"index.js","name":"document","original":{"line":7,"column":13},"generated":{"line":1,"column":213}},{"source":"index.js","name":"querySelector","original":{"line":7,"column":22},"generated":{"line":1,"column":222}},{"source":"index.js","original":{"line":7,"column":36},"generated":{"line":1,"column":236}},{"source":"index.js","name":"messageList","original":{"line":8,"column":6},"generated":{"line":1,"column":242}},{"source":"index.js","name":"document","original":{"line":8,"column":20},"generated":{"line":1,"column":244}},{"source":"index.js","name":"querySelector","original":{"line":8,"column":29},"generated":{"line":1,"column":253}},{"source":"index.js","original":{"line":8,"column":43},"generated":{"line":1,"column":267}},{"source":"index.js","name":"typingCont","original":{"line":9,"column":6},"generated":{"line":1,"column":280}},{"source":"index.js","name":"document","original":{"line":9,"column":19},"generated":{"line":1,"column":282}},{"source":"index.js","name":"querySelector","original":{"line":9,"column":28},"generated":{"line":1,"column":291}},{"source":"index.js","original":{"line":9,"column":42},"generated":{"line":1,"column":305}},{"source":"index.js","name":"usersList","original":{"line":11,"column":6},"generated":{"line":1,"column":321}},{"source":"index.js","original":{"line":11,"column":18},"generated":{"line":1,"column":323}},{"source":"index.js","name":"List","original":{"line":11,"column":22},"generated":{"line":1,"column":327}},{"source":"index.js","original":{"line":11,"column":18},"generated":{"line":1,"column":329}},{"source":"index.js","name":"user","original":{"line":13,"column":6},"generated":{"line":1,"column":337}},{"source":"index.js","original":{"line":13,"column":13},"generated":{"line":1,"column":339}},{"source":"index.js","name":"name","original":{"line":14,"column":2},"generated":{"line":1,"column":340}},{"source":"index.js","name":"name","original":{"line":14,"column":2},"generated":{"line":1,"column":345}},{"source":"index.js","name":"rooms","original":{"line":15,"column":2},"generated":{"line":1,"column":350}},{"source":"index.js","original":{"line":15,"column":9},"generated":{"line":1,"column":356}},{"source":"index.js","name":"activeRoom","original":{"line":16,"column":2},"generated":{"line":1,"column":359}},{"source":"index.js","original":{"line":16,"column":14},"generated":{"line":1,"column":370}},{"source":"index.js","original":{"line":19,"column":0},"generated":{"line":1,"column":380}},{"source":"index.js","name":"askForName","original":{"line":19,"column":9},"generated":{"line":1,"column":389}},{"source":"index.js","name":"username","original":{"line":20,"column":8},"generated":{"line":1,"column":393}},{"source":"index.js","name":"username","original":{"line":20,"column":8},"generated":{"line":1,"column":397}},{"source":"index.js","name":"prompt","original":{"line":20,"column":19},"generated":{"line":1,"column":399}},{"source":"index.js","original":{"line":20,"column":26},"generated":{"line":1,"column":406}},{"source":"index.js","original":{"line":21,"column":18},"generated":{"line":1,"column":425}},{"source":"index.js","name":"username","original":{"line":21,"column":6},"generated":{"line":1,"column":429}},{"source":"index.js","name":"socket","original":{"line":22,"column":4},"generated":{"line":1,"column":432}},{"source":"index.js","name":"emit","original":{"line":22,"column":11},"generated":{"line":1,"column":434}},{"source":"index.js","original":{"line":22,"column":16},"generated":{"line":1,"column":439}},{"source":"index.js","original":{"line":22,"column":30},"generated":{"line":1,"column":452}},{"source":"index.js","name":"username","original":{"line":22,"column":32},"generated":{"line":1,"column":453}},{"source":"index.js","name":"username","original":{"line":22,"column":32},"generated":{"line":1,"column":462}},{"source":"index.js","name":"user","original":{"line":24,"column":2},"generated":{"line":1,"column":466}},{"source":"index.js","name":"name","original":{"line":24,"column":7},"generated":{"line":1,"column":468}},{"source":"index.js","name":"username","original":{"line":24,"column":14},"generated":{"line":1,"column":473}},{"source":"index.js","name":"user","original":{"line":25,"column":2},"generated":{"line":1,"column":475}},{"source":"index.js","name":"rooms","original":{"line":25,"column":7},"generated":{"line":1,"column":477}},{"source":"index.js","name":"push","original":{"line":25,"column":13},"generated":{"line":1,"column":483}},{"source":"index.js","original":{"line":25,"column":18},"generated":{"line":1,"column":488}},{"source":"index.js","name":"nick","original":{"line":27,"column":2},"generated":{"line":1,"column":498}},{"source":"index.js","name":"value","original":{"line":27,"column":7},"generated":{"line":1,"column":500}},{"source":"index.js","name":"username","original":{"line":27,"column":15},"generated":{"line":1,"column":506}},{"source":"index.js","original":{"line":30,"column":0},"generated":{"line":1,"column":508}},{"source":"index.js","name":"checkIfExistsAndRemove","original":{"line":30,"column":9},"generated":{"line":1,"column":517}},{"source":"index.js","name":"user","original":{"line":30,"column":32},"generated":{"line":1,"column":519}},{"source":"index.js","name":"tag","original":{"line":31,"column":8},"generated":{"line":1,"column":522}},{"source":"index.js","name":"tag","original":{"line":31,"column":8},"generated":{"line":1,"column":526}},{"source":"index.js","name":"typingCont","original":{"line":31,"column":14},"generated":{"line":1,"column":528}},{"source":"index.js","name":"querySelector","original":{"line":31,"column":25},"generated":{"line":1,"column":530}},{"source":"index.js","name":"user","original":{"line":31,"column":43},"generated":{"line":1,"column":544}},{"source":"index.js","name":"user","original":{"line":31,"column":43},"generated":{"line":1,"column":548}},{"source":"index.js","name":"user","original":{"line":31,"column":43},"generated":{"line":1,"column":555}},{"source":"index.js","original":{"line":32,"column":13},"generated":{"line":1,"column":559}},{"source":"index.js","name":"tag","original":{"line":32,"column":6},"generated":{"line":1,"column":565}},{"source":"index.js","name":"typingCont","original":{"line":33,"column":4},"generated":{"line":1,"column":568}},{"source":"index.js","name":"removeChild","original":{"line":33,"column":15},"generated":{"line":1,"column":570}},{"source":"index.js","name":"tag","original":{"line":33,"column":27},"generated":{"line":1,"column":582}},{"source":"index.js","original":{"line":37,"column":0},"generated":{"line":1,"column":585}},{"source":"index.js","name":"typingTimeout","original":{"line":37,"column":9},"generated":{"line":1,"column":594}},{"source":"index.js","name":"socket","original":{"line":38,"column":2},"generated":{"line":1,"column":598}},{"source":"index.js","name":"emit","original":{"line":38,"column":9},"generated":{"line":1,"column":600}},{"source":"index.js","original":{"line":38,"column":14},"generated":{"line":1,"column":605}},{"source":"index.js","original":{"line":38,"column":29},"generated":{"line":1,"column":619}},{"source":"index.js","name":"isTyping","original":{"line":38,"column":31},"generated":{"line":1,"column":620}},{"source":"index.js","original":{"line":38,"column":41},"generated":{"line":1,"column":630}},{"source":"index.js","name":"user","original":{"line":38,"column":48},"generated":{"line":1,"column":632}},{"source":"index.js","name":"user","original":{"line":38,"column":54},"generated":{"line":1,"column":637}},{"source":"index.js","original":{"line":41,"column":0},"generated":{"line":1,"column":641}},{"source":"index.js","name":"userTyping","original":{"line":41,"column":6},"generated":{"line":1,"column":645}},{"source":"index.js","original":{"line":41,"column":20},"generated":{"line":1,"column":647}},{"source":"index.js","name":"timeout","original":{"line":42,"column":6},"generated":{"line":1,"column":658}},{"source":"index.js","name":"timeout","original":{"line":42,"column":6},"generated":{"line":1,"column":662}},{"source":"index.js","original":{"line":42,"column":16},"generated":{"line":1,"column":664}},{"source":"index.js","original":{"line":43,"column":9},"generated":{"line":1,"column":669}},{"source":"index.js","original":{"line":43,"column":9},"generated":{"line":1,"column":676}},{"source":"index.js","name":"delay","original":{"line":43,"column":19},"generated":{"line":1,"column":685}},{"source":"index.js","name":"socket","original":{"line":44,"column":4},"generated":{"line":1,"column":688}},{"source":"index.js","name":"emit","original":{"line":44,"column":11},"generated":{"line":1,"column":690}},{"source":"index.js","original":{"line":44,"column":16},"generated":{"line":1,"column":695}},{"source":"index.js","original":{"line":44,"column":31},"generated":{"line":1,"column":709}},{"source":"index.js","name":"isTyping","original":{"line":44,"column":33},"generated":{"line":1,"column":710}},{"source":"index.js","original":{"line":44,"column":43},"generated":{"line":1,"column":720}},{"source":"index.js","name":"user","original":{"line":44,"column":49},"generated":{"line":1,"column":722}},{"source":"index.js","name":"user","original":{"line":44,"column":55},"generated":{"line":1,"column":727}},{"source":"index.js","name":"clearTimeout","original":{"line":45,"column":4},"generated":{"line":1,"column":731}},{"source":"index.js","name":"timeout","original":{"line":45,"column":17},"generated":{"line":1,"column":744}},{"source":"index.js","name":"timeout","original":{"line":46,"column":4},"generated":{"line":1,"column":747}},{"source":"index.js","name":"setTimeout","original":{"line":46,"column":14},"generated":{"line":1,"column":749}},{"source":"index.js","name":"typingTimeout","original":{"line":46,"column":25},"generated":{"line":1,"column":760}},{"source":"index.js","name":"delay","original":{"line":46,"column":40},"generated":{"line":1,"column":762}},{"source":"index.js","original":{"line":41,"column":20},"generated":{"line":1,"column":766}},{"source":"index.js","original":{"line":50,"column":0},"generated":{"line":1,"column":769}},{"source":"index.js","name":"addTypingInfo","original":{"line":50,"column":9},"generated":{"line":1,"column":778}},{"source":"index.js","original":{"line":50,"column":53},"generated":{"line":1,"column":780}},{"source":"index.js","name":"isTyping","original":{"line":50,"column":25},"generated":{"line":1,"column":783}},{"source":"index.js","name":"typingTag","original":{"line":51,"column":6},"generated":{"line":1,"column":787}},{"source":"index.js","name":"isTyping","original":{"line":50,"column":25},"generated":{"line":1,"column":789}},{"source":"index.js","name":"isTyping","original":{"line":50,"column":25},"generated":{"line":1,"column":791}},{"source":"index.js","name":"isTyping","original":{"line":50,"column":25},"generated":{"line":1,"column":793}},{"source":"index.js","name":"name","original":{"line":50,"column":43},"generated":{"line":1,"column":802}},{"source":"index.js","name":"user","original":{"line":50,"column":35},"generated":{"line":1,"column":804}},{"source":"index.js","name":"user","original":{"line":50,"column":35},"generated":{"line":1,"column":806}},{"source":"index.js","name":"name","original":{"line":50,"column":43},"generated":{"line":1,"column":811}},{"source":"index.js","original":{"line":52,"column":46},"generated":{"line":1,"column":816}},{"source":"index.js","name":"typingCont","original":{"line":52,"column":6},"generated":{"line":1,"column":822}},{"source":"index.js","name":"querySelector","original":{"line":52,"column":17},"generated":{"line":1,"column":824}},{"source":"index.js","name":"name","original":{"line":52,"column":35},"generated":{"line":1,"column":838}},{"source":"index.js","name":"name","original":{"line":52,"column":35},"generated":{"line":1,"column":842}},{"source":"index.js","name":"name","original":{"line":52,"column":35},"generated":{"line":1,"column":849}},{"source":"index.js","name":"typingTag","original":{"line":53,"column":4},"generated":{"line":1,"column":854}},{"source":"index.js","name":"document","original":{"line":53,"column":16},"generated":{"line":1,"column":856}},{"source":"index.js","name":"createElement","original":{"line":53,"column":25},"generated":{"line":1,"column":865}},{"source":"index.js","original":{"line":53,"column":39},"generated":{"line":1,"column":879}},{"source":"index.js","name":"setAttribute","original":{"line":54,"column":14},"generated":{"line":1,"column":886}},{"source":"index.js","original":{"line":54,"column":27},"generated":{"line":1,"column":899}},{"source":"index.js","name":"name","original":{"line":54,"column":33},"generated":{"line":1,"column":904}},{"source":"index.js","name":"typingTag","original":{"line":56,"column":4},"generated":{"line":1,"column":907}},{"source":"index.js","name":"typingCont","original":{"line":56,"column":16},"generated":{"line":1,"column":909}},{"source":"index.js","name":"querySelector","original":{"line":56,"column":27},"generated":{"line":1,"column":911}},{"source":"index.js","name":"name","original":{"line":56,"column":45},"generated":{"line":1,"column":925}},{"source":"index.js","name":"name","original":{"line":56,"column":45},"generated":{"line":1,"column":929}},{"source":"index.js","name":"name","original":{"line":56,"column":45},"generated":{"line":1,"column":936}},{"source":"index.js","name":"isTyping","original":{"line":59,"column":6},"generated":{"line":1,"column":940}},{"source":"index.js","name":"typingTag","original":{"line":60,"column":4},"generated":{"line":1,"column":943}},{"source":"index.js","name":"textContent","original":{"line":60,"column":14},"generated":{"line":1,"column":945}},{"source":"index.js","name":"name","original":{"line":60,"column":31},"generated":{"line":1,"column":957}},{"source":"index.js","name":"name","original":{"line":60,"column":31},"generated":{"line":1,"column":960}},{"source":"index.js","name":"name","original":{"line":60,"column":31},"generated":{"line":1,"column":967}},{"source":"index.js","original":{"line":60,"column":4},"generated":{"line":1,"column":969}},{"source":"index.js","name":"typingCont","original":{"line":61,"column":4},"generated":{"line":1,"column":986}},{"source":"index.js","name":"appendChild","original":{"line":61,"column":15},"generated":{"line":1,"column":988}},{"source":"index.js","name":"typingTag","original":{"line":61,"column":27},"generated":{"line":1,"column":1000}},{"source":"index.js","name":"checkIfExistsAndRemove","original":{"line":63,"column":4},"generated":{"line":1,"column":1004}},{"source":"index.js","name":"name","original":{"line":63,"column":27},"generated":{"line":1,"column":1006}},{"source":"index.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1009}},{"source":"index.js","name":"handleFormSubmission","original":{"line":67,"column":9},"generated":{"line":1,"column":1018}},{"source":"index.js","name":"e","original":{"line":67,"column":30},"generated":{"line":1,"column":1020}},{"source":"index.js","name":"mess","original":{"line":69,"column":6},"generated":{"line":1,"column":1023}},{"source":"index.js","name":"e","original":{"line":68,"column":2},"generated":{"line":1,"column":1026}},{"source":"index.js","name":"preventDefault","original":{"line":68,"column":4},"generated":{"line":1,"column":1028}},{"source":"index.js","original":{"line":69,"column":20},"generated":{"line":1,"column":1045}},{"source":"index.js","name":"mess","original":{"line":69,"column":6},"generated":{"line":1,"column":1049}},{"source":"index.js","name":"value","original":{"line":69,"column":11},"generated":{"line":1,"column":1051}},{"source":"index.js","original":{"line":69,"column":40},"generated":{"line":1,"column":1058}},{"source":"index.js","name":"nick","original":{"line":69,"column":26},"generated":{"line":1,"column":1062}},{"source":"index.js","name":"value","original":{"line":69,"column":31},"generated":{"line":1,"column":1064}},{"source":"index.js","original":{"line":69,"column":44},"generated":{"line":1,"column":1070}},{"source":"index.js","name":"data","original":{"line":70,"column":10},"generated":{"line":1,"column":1071}},{"source":"index.js","name":"data","original":{"line":70,"column":10},"generated":{"line":1,"column":1075}},{"source":"index.js","original":{"line":70,"column":17},"generated":{"line":1,"column":1077}},{"source":"index.js","name":"message","original":{"line":71,"column":6},"generated":{"line":1,"column":1078}},{"source":"index.js","name":"mess","original":{"line":71,"column":15},"generated":{"line":1,"column":1086}},{"source":"index.js","name":"value","original":{"line":71,"column":20},"generated":{"line":1,"column":1088}},{"source":"index.js","name":"user","original":{"line":72,"column":6},"generated":{"line":1,"column":1094}},{"source":"index.js","name":"user","original":{"line":72,"column":12},"generated":{"line":1,"column":1099}},{"source":"index.js","name":"html","original":{"line":73,"column":6},"generated":{"line":1,"column":1101}},{"source":"index.js","name":"user","original":{"line":73,"column":19},"generated":{"line":1,"column":1106}},{"source":"index.js","name":"user","original":{"line":73,"column":19},"generated":{"line":1,"column":1113}},{"source":"index.js","name":"user","original":{"line":73,"column":19},"generated":{"line":1,"column":1120}},{"source":"index.js","name":"name","original":{"line":73,"column":24},"generated":{"line":1,"column":1122}},{"source":"index.js","name":"mess","original":{"line":73,"column":33},"generated":{"line":1,"column":1127}},{"source":"index.js","name":"mess","original":{"line":73,"column":33},"generated":{"line":1,"column":1133}},{"source":"index.js","name":"mess","original":{"line":73,"column":33},"generated":{"line":1,"column":1140}},{"source":"index.js","name":"value","original":{"line":73,"column":38},"generated":{"line":1,"column":1142}},{"source":"index.js","original":{"line":73,"column":10},"generated":{"line":1,"column":1148}},{"source":"index.js","name":"mess","original":{"line":75,"column":4},"generated":{"line":1,"column":1158}},{"source":"index.js","name":"value","original":{"line":75,"column":9},"generated":{"line":1,"column":1160}},{"source":"index.js","original":{"line":75,"column":17},"generated":{"line":1,"column":1166}},{"source":"index.js","name":"socket","original":{"line":76,"column":4},"generated":{"line":1,"column":1169}},{"source":"index.js","name":"emit","original":{"line":76,"column":11},"generated":{"line":1,"column":1171}},{"source":"index.js","original":{"line":76,"column":16},"generated":{"line":1,"column":1176}},{"source":"index.js","name":"data","original":{"line":76,"column":36},"generated":{"line":1,"column":1195}},{"source":"index.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1199}},{"source":"index.js","name":"addChatMessage","original":{"line":80,"column":9},"generated":{"line":1,"column":1208}},{"source":"index.js","original":{"line":80,"column":51},"generated":{"line":1,"column":1210}},{"source":"index.js","name":"allMsg","original":{"line":80,"column":26},"generated":{"line":1,"column":1213}},{"source":"index.js","name":"allMsg","original":{"line":80,"column":26},"generated":{"line":1,"column":1217}},{"source":"index.js","name":"allMsg","original":{"line":80,"column":26},"generated":{"line":1,"column":1219}},{"source":"index.js","name":"allMsg","original":{"line":80,"column":26},"generated":{"line":1,"column":1221}},{"source":"index.js","name":"userTag","original":{"line":80,"column":40},"generated":{"line":1,"column":1228}},{"source":"index.js","name":"user","original":{"line":80,"column":34},"generated":{"line":1,"column":1230}},{"source":"index.js","name":"user","original":{"line":80,"column":34},"generated":{"line":1,"column":1232}},{"source":"index.js","name":"messageList","original":{"line":81,"column":2},"generated":{"line":1,"column":1237}},{"source":"index.js","name":"innerHTML","original":{"line":81,"column":14},"generated":{"line":1,"column":1239}},{"source":"index.js","name":"allMsg","original":{"line":81,"column":26},"generated":{"line":1,"column":1249}},{"source":"index.js","name":"checkIfExistsAndRemove","original":{"line":82,"column":2},"generated":{"line":1,"column":1251}},{"source":"index.js","name":"userTag","original":{"line":82,"column":25},"generated":{"line":1,"column":1253}},{"source":"index.js","name":"askForName","original":{"line":85,"column":0},"generated":{"line":1,"column":1256}},{"source":"index.js","name":"form","original":{"line":87,"column":0},"generated":{"line":1,"column":1260}},{"source":"index.js","name":"addEventListener","original":{"line":87,"column":5},"generated":{"line":1,"column":1262}},{"source":"index.js","original":{"line":87,"column":22},"generated":{"line":1,"column":1279}},{"source":"index.js","name":"handleFormSubmission","original":{"line":87,"column":32},"generated":{"line":1,"column":1288}},{"source":"index.js","name":"mess","original":{"line":88,"column":0},"generated":{"line":1,"column":1291}},{"source":"index.js","name":"addEventListener","original":{"line":88,"column":5},"generated":{"line":1,"column":1293}},{"source":"index.js","original":{"line":88,"column":22},"generated":{"line":1,"column":1310}},{"source":"index.js","original":{"line":88,"column":31},"generated":{"line":1,"column":1318}},{"source":"index.js","name":"userTyping","original":{"line":89,"column":2},"generated":{"line":1,"column":1329}},{"source":"index.js","original":{"line":89,"column":13},"generated":{"line":1,"column":1331}},{"source":"index.js","name":"socket","original":{"line":92,"column":0},"generated":{"line":1,"column":1338}},{"source":"index.js","name":"on","original":{"line":92,"column":7},"generated":{"line":1,"column":1340}},{"source":"index.js","original":{"line":92,"column":10},"generated":{"line":1,"column":1343}},{"source":"index.js","name":"addChatMessage","original":{"line":92,"column":30},"generated":{"line":1,"column":1362}},{"source":"index.js","name":"socket","original":{"line":93,"column":0},"generated":{"line":1,"column":1365}},{"source":"index.js","name":"on","original":{"line":93,"column":7},"generated":{"line":1,"column":1367}},{"source":"index.js","original":{"line":93,"column":10},"generated":{"line":1,"column":1370}},{"source":"index.js","name":"addTypingInfo","original":{"line":93,"column":25},"generated":{"line":1,"column":1384}},{"source":"index.js","name":"socket","original":{"line":94,"column":0},"generated":{"line":1,"column":1387}},{"source":"index.js","name":"on","original":{"line":94,"column":7},"generated":{"line":1,"column":1389}},{"source":"index.js","original":{"line":94,"column":10},"generated":{"line":1,"column":1392}},{"source":"index.js","name":"usersList","original":{"line":94,"column":22},"generated":{"line":1,"column":1403}},{"source":"index.js","name":"addUser","original":{"line":94,"column":32},"generated":{"line":1,"column":1405}},{"source":"index.js","name":"bind","original":{"line":94,"column":40},"generated":{"line":1,"column":1413}},{"source":"index.js","name":"usersList","original":{"line":94,"column":45},"generated":{"line":1,"column":1418}},{"source":"index.js","name":"socket","original":{"line":95,"column":0},"generated":{"line":1,"column":1422}},{"source":"index.js","name":"on","original":{"line":95,"column":7},"generated":{"line":1,"column":1424}},{"source":"index.js","original":{"line":95,"column":10},"generated":{"line":1,"column":1427}},{"source":"index.js","name":"usersList","original":{"line":95,"column":25},"generated":{"line":1,"column":1441}},{"source":"index.js","name":"removeUser","original":{"line":95,"column":35},"generated":{"line":1,"column":1443}},{"source":"index.js","name":"bind","original":{"line":95,"column":46},"generated":{"line":1,"column":1454}},{"source":"index.js","name":"usersList","original":{"line":95,"column":51},"generated":{"line":1,"column":1459}}],"sources":{"index.js":"import io from 'socket.io-client';\r\nimport List from '../List';\r\n\r\nconst socket = io();\r\nconst form = document.querySelector('form');\r\nconst mess = document.querySelector('#m');\r\nconst nick = document.querySelector('#n');\r\nconst messageList = document.querySelector('.messages');\r\nconst typingCont = document.querySelector('.typing-cont');\r\n\r\nconst usersList = new List();\r\n\r\nconst user = {\r\n  name,\r\n  rooms: [],\r\n  activeRoom: 'global',\r\n};\r\n\r\nfunction askForName() {\r\n  const username = prompt('enter your name');\r\n  if (username != '') {\r\n    socket.emit('user login', { username });\r\n  }\r\n  user.name = username;\r\n  user.rooms.push('global');\r\n  // console.log(user);\r\n  nick.value = username;\r\n}\r\n\r\nfunction checkIfExistsAndRemove(user) {\r\n  const tag = typingCont.querySelector(`#${user}`);\r\n  if (tag != null) {\r\n    typingCont.removeChild(tag);\r\n  }\r\n}\r\n\r\nfunction typingTimeout() {\r\n  socket.emit('user typing', { isTyping: false, user: user });\r\n}\r\n\r\nconst userTyping = (function () {\r\n  let timeout = null;\r\n  return function (delay) {\r\n    socket.emit('user typing', { isTyping: true, user: user });\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(typingTimeout, delay);\r\n  };\r\n})();\r\n\r\nfunction addTypingInfo({ isTyping, user: { name } }) {\r\n  let typingTag;\r\n  if (typingCont.querySelector(`#${name}`) == null) {\r\n    typingTag = document.createElement('li');\r\n    typingTag.setAttribute('id', name);\r\n  } else {\r\n    typingTag = typingCont.querySelector(`#${name}`);\r\n  }\r\n\r\n  if (isTyping) {\r\n    typingTag.textContent = `${name} is typing...`;\r\n    typingCont.appendChild(typingTag);\r\n  } else {\r\n    checkIfExistsAndRemove(name);\r\n  }\r\n}\r\n\r\nfunction handleFormSubmission(e) {\r\n  e.preventDefault();\r\n  if (mess.value != '' && nick.value != '') {\r\n    const data = {\r\n      message: mess.value,\r\n      user: user,\r\n      html: `<li>${user.name}: ${mess.value}</li>`,\r\n    };\r\n    mess.value = '';\r\n    socket.emit('chat new message', data);\r\n  }\r\n}\r\n\r\nfunction addChatMessage({ allMsg, user: userTag }) {\r\n  messageList.innerHTML = allMsg;\r\n  checkIfExistsAndRemove(userTag);\r\n}\r\n\r\naskForName();\r\n\r\nform.addEventListener('submit', handleFormSubmission);\r\nmess.addEventListener('input', () => {\r\n  userTyping(4000);\r\n});\r\n\r\nsocket.on('chat new message', addChatMessage);\r\nsocket.on('user typing', addTypingInfo);\r\nsocket.on('new user', usersList.addUser.bind(usersList));\r\nsocket.on('remove user', usersList.removeUser.bind(usersList));\r\n"},"lineCount":null}},"error":null,"hash":"f5474c2c9ae2568f021bb356cd9aa9d4","cacheData":{"env":{}}}
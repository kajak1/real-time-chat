{"id":"Focm","dependencies":[{"name":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\package.json","includedInParent":true,"mtime":1601549051156},{"name":"socket.io-client","loc":{"line":1,"column":15},"parent":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\user\\public\\index.js","resolved":"C:\\Users\\korzonki\\Documents\\kajetan\\real-time-chat\\node_modules\\socket.io-client\\lib\\index.js"}],"generated":{"js":"\"use strict\";var e=n(require(\"socket.io-client\"));function n(e){return e&&e.__esModule?e:{default:e}}var t=(0,e.default)(),u=document.querySelector(\"form\"),o=document.querySelector(\"#m\"),r=document.querySelector(\"#n\"),i=document.querySelector(\".messages\"),a=document.querySelector(\".typing\"),c={};function s(){c.name=prompt(\"enter your name\"),\"\"!=c.name&&t.emit(\"user login\",c.name),r.value=c.name}function m(){t.emit(\"user typing\",{typing:!1})}var l=function(){var e=null;return function(n){t.emit(\"user typing\",{typing:!0,user:c.name}),clearTimeout(e),e=setTimeout(m,n)}}();function v(e){var n=e.typing,t=e.user;a.textContent=n?\"\".concat(t,\" is typing...\"):\"\"}function f(){console.log(\"new user joined\")}function g(e){if(e.preventDefault(),\"\"!=o.value&&\"\"!=r.value){var n={message:o.value,author:r.value};o.value=\"\",t.emit(\"chat message\",n)}}function y(e){var n=e.message,t=e.author;i.innerHTML+=\"<li>\".concat(t,\": \").concat(n,\"</li>\"),a.textContent=\"\"}s(),u.addEventListener(\"submit\",g),o.addEventListener(\"input\",function(){l(1500)}),t.on(\"chat message\",y),t.on(\"user typing\",v),t.on(\"new user\",f);"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":0}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":17}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":19}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":29}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":50}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":59}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":61}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":64}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":71}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":74}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":76}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":87}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":89}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":90}},{"source":"index.js","original":{"line":74,"column":0},"generated":{"line":1,"column":98}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":101}},{"source":"index.js","name":"socket","original":{"line":3,"column":6},"generated":{"line":1,"column":105}},{"source":"index.js","original":{"line":3,"column":15},"generated":{"line":1,"column":108}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":110}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":112}},{"source":"index.js","name":"form","original":{"line":4,"column":6},"generated":{"line":1,"column":123}},{"source":"index.js","name":"document","original":{"line":4,"column":13},"generated":{"line":1,"column":125}},{"source":"index.js","name":"querySelector","original":{"line":4,"column":22},"generated":{"line":1,"column":134}},{"source":"index.js","original":{"line":4,"column":36},"generated":{"line":1,"column":148}},{"source":"index.js","name":"mess","original":{"line":5,"column":6},"generated":{"line":1,"column":156}},{"source":"index.js","name":"document","original":{"line":5,"column":13},"generated":{"line":1,"column":158}},{"source":"index.js","name":"querySelector","original":{"line":5,"column":22},"generated":{"line":1,"column":167}},{"source":"index.js","original":{"line":5,"column":36},"generated":{"line":1,"column":181}},{"source":"index.js","name":"nick","original":{"line":6,"column":6},"generated":{"line":1,"column":187}},{"source":"index.js","name":"document","original":{"line":6,"column":13},"generated":{"line":1,"column":189}},{"source":"index.js","name":"querySelector","original":{"line":6,"column":22},"generated":{"line":1,"column":198}},{"source":"index.js","original":{"line":6,"column":36},"generated":{"line":1,"column":212}},{"source":"index.js","name":"ul","original":{"line":7,"column":6},"generated":{"line":1,"column":218}},{"source":"index.js","name":"document","original":{"line":7,"column":11},"generated":{"line":1,"column":220}},{"source":"index.js","name":"querySelector","original":{"line":7,"column":20},"generated":{"line":1,"column":229}},{"source":"index.js","original":{"line":7,"column":34},"generated":{"line":1,"column":243}},{"source":"index.js","name":"typingInfo","original":{"line":8,"column":6},"generated":{"line":1,"column":256}},{"source":"index.js","name":"document","original":{"line":8,"column":19},"generated":{"line":1,"column":258}},{"source":"index.js","name":"querySelector","original":{"line":8,"column":28},"generated":{"line":1,"column":267}},{"source":"index.js","original":{"line":8,"column":42},"generated":{"line":1,"column":281}},{"source":"index.js","name":"user","original":{"line":10,"column":6},"generated":{"line":1,"column":292}},{"source":"index.js","original":{"line":10,"column":13},"generated":{"line":1,"column":294}},{"source":"index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":297}},{"source":"index.js","name":"askForName","original":{"line":15,"column":9},"generated":{"line":1,"column":306}},{"source":"index.js","name":"user","original":{"line":16,"column":2},"generated":{"line":1,"column":310}},{"source":"index.js","name":"name","original":{"line":16,"column":7},"generated":{"line":1,"column":312}},{"source":"index.js","name":"prompt","original":{"line":16,"column":14},"generated":{"line":1,"column":317}},{"source":"index.js","original":{"line":16,"column":21},"generated":{"line":1,"column":324}},{"source":"index.js","original":{"line":17,"column":19},"generated":{"line":1,"column":343}},{"source":"index.js","name":"user","original":{"line":17,"column":6},"generated":{"line":1,"column":347}},{"source":"index.js","name":"name","original":{"line":17,"column":11},"generated":{"line":1,"column":349}},{"source":"index.js","name":"socket","original":{"line":18,"column":4},"generated":{"line":1,"column":355}},{"source":"index.js","name":"emit","original":{"line":18,"column":11},"generated":{"line":1,"column":357}},{"source":"index.js","original":{"line":18,"column":16},"generated":{"line":1,"column":362}},{"source":"index.js","name":"user","original":{"line":18,"column":30},"generated":{"line":1,"column":375}},{"source":"index.js","name":"name","original":{"line":18,"column":35},"generated":{"line":1,"column":377}},{"source":"index.js","name":"nick","original":{"line":20,"column":2},"generated":{"line":1,"column":383}},{"source":"index.js","name":"value","original":{"line":20,"column":7},"generated":{"line":1,"column":385}},{"source":"index.js","name":"user","original":{"line":20,"column":15},"generated":{"line":1,"column":391}},{"source":"index.js","name":"name","original":{"line":20,"column":20},"generated":{"line":1,"column":393}},{"source":"index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":398}},{"source":"index.js","name":"typingTimeout","original":{"line":23,"column":9},"generated":{"line":1,"column":407}},{"source":"index.js","name":"socket","original":{"line":25,"column":2},"generated":{"line":1,"column":411}},{"source":"index.js","name":"emit","original":{"line":25,"column":9},"generated":{"line":1,"column":413}},{"source":"index.js","original":{"line":25,"column":14},"generated":{"line":1,"column":418}},{"source":"index.js","original":{"line":25,"column":29},"generated":{"line":1,"column":432}},{"source":"index.js","name":"typing","original":{"line":25,"column":31},"generated":{"line":1,"column":433}},{"source":"index.js","original":{"line":25,"column":39},"generated":{"line":1,"column":441}},{"source":"index.js","original":{"line":28,"column":0},"generated":{"line":1,"column":445}},{"source":"index.js","name":"userTyping","original":{"line":28,"column":6},"generated":{"line":1,"column":449}},{"source":"index.js","original":{"line":28,"column":20},"generated":{"line":1,"column":451}},{"source":"index.js","name":"timeout","original":{"line":29,"column":6},"generated":{"line":1,"column":462}},{"source":"index.js","name":"timeout","original":{"line":29,"column":6},"generated":{"line":1,"column":466}},{"source":"index.js","original":{"line":29,"column":16},"generated":{"line":1,"column":468}},{"source":"index.js","original":{"line":30,"column":9},"generated":{"line":1,"column":473}},{"source":"index.js","original":{"line":30,"column":9},"generated":{"line":1,"column":480}},{"source":"index.js","name":"delay","original":{"line":30,"column":19},"generated":{"line":1,"column":489}},{"source":"index.js","name":"socket","original":{"line":31,"column":4},"generated":{"line":1,"column":492}},{"source":"index.js","name":"emit","original":{"line":31,"column":11},"generated":{"line":1,"column":494}},{"source":"index.js","original":{"line":31,"column":16},"generated":{"line":1,"column":499}},{"source":"index.js","original":{"line":31,"column":31},"generated":{"line":1,"column":513}},{"source":"index.js","name":"typing","original":{"line":31,"column":33},"generated":{"line":1,"column":514}},{"source":"index.js","original":{"line":31,"column":41},"generated":{"line":1,"column":522}},{"source":"index.js","name":"user","original":{"line":31,"column":47},"generated":{"line":1,"column":524}},{"source":"index.js","name":"user","original":{"line":31,"column":53},"generated":{"line":1,"column":529}},{"source":"index.js","name":"name","original":{"line":31,"column":58},"generated":{"line":1,"column":531}},{"source":"index.js","name":"clearTimeout","original":{"line":32,"column":4},"generated":{"line":1,"column":538}},{"source":"index.js","name":"timeout","original":{"line":32,"column":17},"generated":{"line":1,"column":551}},{"source":"index.js","name":"timeout","original":{"line":33,"column":4},"generated":{"line":1,"column":554}},{"source":"index.js","name":"setTimeout","original":{"line":33,"column":14},"generated":{"line":1,"column":556}},{"source":"index.js","name":"typingTimeout","original":{"line":33,"column":25},"generated":{"line":1,"column":567}},{"source":"index.js","name":"delay","original":{"line":33,"column":40},"generated":{"line":1,"column":569}},{"source":"index.js","original":{"line":28,"column":20},"generated":{"line":1,"column":573}},{"source":"index.js","original":{"line":37,"column":0},"generated":{"line":1,"column":576}},{"source":"index.js","name":"addTypingInfo","original":{"line":37,"column":9},"generated":{"line":1,"column":585}},{"source":"index.js","original":{"line":37,"column":41},"generated":{"line":1,"column":587}},{"source":"index.js","name":"typing","original":{"line":37,"column":25},"generated":{"line":1,"column":590}},{"source":"index.js","name":"typing","original":{"line":37,"column":25},"generated":{"line":1,"column":594}},{"source":"index.js","name":"typing","original":{"line":37,"column":25},"generated":{"line":1,"column":596}},{"source":"index.js","name":"typing","original":{"line":37,"column":25},"generated":{"line":1,"column":598}},{"source":"index.js","name":"user","original":{"line":37,"column":33},"generated":{"line":1,"column":605}},{"source":"index.js","name":"user","original":{"line":37,"column":33},"generated":{"line":1,"column":607}},{"source":"index.js","name":"user","original":{"line":37,"column":33},"generated":{"line":1,"column":609}},{"source":"index.js","name":"typingInfo","original":{"line":39,"column":4},"generated":{"line":1,"column":614}},{"source":"index.js","name":"textContent","original":{"line":39,"column":15},"generated":{"line":1,"column":616}},{"source":"index.js","name":"typing","original":{"line":38,"column":6},"generated":{"line":1,"column":628}},{"source":"index.js","name":"user","original":{"line":39,"column":32},"generated":{"line":1,"column":630}},{"source":"index.js","name":"user","original":{"line":39,"column":32},"generated":{"line":1,"column":633}},{"source":"index.js","name":"user","original":{"line":39,"column":32},"generated":{"line":1,"column":640}},{"source":"index.js","original":{"line":39,"column":4},"generated":{"line":1,"column":642}},{"source":"index.js","original":{"line":41,"column":29},"generated":{"line":1,"column":659}},{"source":"index.js","original":{"line":45,"column":0},"generated":{"line":1,"column":662}},{"source":"index.js","name":"newUserUpdate","original":{"line":45,"column":9},"generated":{"line":1,"column":671}},{"source":"index.js","name":"console","original":{"line":46,"column":2},"generated":{"line":1,"column":675}},{"source":"index.js","name":"log","original":{"line":46,"column":10},"generated":{"line":1,"column":683}},{"source":"index.js","original":{"line":46,"column":14},"generated":{"line":1,"column":687}},{"source":"index.js","original":{"line":49,"column":0},"generated":{"line":1,"column":706}},{"source":"index.js","name":"handleFormSubmission","original":{"line":49,"column":9},"generated":{"line":1,"column":715}},{"source":"index.js","name":"e","original":{"line":49,"column":30},"generated":{"line":1,"column":717}},{"source":"index.js","name":"mess","original":{"line":51,"column":6},"generated":{"line":1,"column":720}},{"source":"index.js","name":"e","original":{"line":50,"column":2},"generated":{"line":1,"column":723}},{"source":"index.js","name":"preventDefault","original":{"line":50,"column":4},"generated":{"line":1,"column":725}},{"source":"index.js","original":{"line":51,"column":20},"generated":{"line":1,"column":742}},{"source":"index.js","name":"mess","original":{"line":51,"column":6},"generated":{"line":1,"column":746}},{"source":"index.js","name":"value","original":{"line":51,"column":11},"generated":{"line":1,"column":748}},{"source":"index.js","original":{"line":51,"column":40},"generated":{"line":1,"column":755}},{"source":"index.js","name":"nick","original":{"line":51,"column":26},"generated":{"line":1,"column":759}},{"source":"index.js","name":"value","original":{"line":51,"column":31},"generated":{"line":1,"column":761}},{"source":"index.js","original":{"line":51,"column":44},"generated":{"line":1,"column":767}},{"source":"index.js","name":"data","original":{"line":52,"column":10},"generated":{"line":1,"column":768}},{"source":"index.js","name":"data","original":{"line":52,"column":10},"generated":{"line":1,"column":772}},{"source":"index.js","original":{"line":52,"column":17},"generated":{"line":1,"column":774}},{"source":"index.js","name":"message","original":{"line":52,"column":19},"generated":{"line":1,"column":775}},{"source":"index.js","name":"mess","original":{"line":52,"column":28},"generated":{"line":1,"column":783}},{"source":"index.js","name":"value","original":{"line":52,"column":33},"generated":{"line":1,"column":785}},{"source":"index.js","name":"author","original":{"line":52,"column":40},"generated":{"line":1,"column":791}},{"source":"index.js","name":"nick","original":{"line":52,"column":48},"generated":{"line":1,"column":798}},{"source":"index.js","name":"value","original":{"line":52,"column":53},"generated":{"line":1,"column":800}},{"source":"index.js","name":"mess","original":{"line":53,"column":4},"generated":{"line":1,"column":807}},{"source":"index.js","name":"value","original":{"line":53,"column":9},"generated":{"line":1,"column":809}},{"source":"index.js","original":{"line":53,"column":17},"generated":{"line":1,"column":815}},{"source":"index.js","name":"socket","original":{"line":54,"column":4},"generated":{"line":1,"column":818}},{"source":"index.js","name":"emit","original":{"line":54,"column":11},"generated":{"line":1,"column":820}},{"source":"index.js","original":{"line":54,"column":16},"generated":{"line":1,"column":825}},{"source":"index.js","name":"data","original":{"line":54,"column":32},"generated":{"line":1,"column":840}},{"source":"index.js","original":{"line":59,"column":0},"generated":{"line":1,"column":844}},{"source":"index.js","name":"addChatMessage","original":{"line":59,"column":9},"generated":{"line":1,"column":853}},{"source":"index.js","name":"msg","original":{"line":59,"column":24},"generated":{"line":1,"column":855}},{"source":"index.js","name":"message","original":{"line":60,"column":10},"generated":{"line":1,"column":858}},{"source":"index.js","name":"message","original":{"line":60,"column":10},"generated":{"line":1,"column":862}},{"source":"index.js","name":"msg","original":{"line":60,"column":30},"generated":{"line":1,"column":864}},{"source":"index.js","name":"message","original":{"line":60,"column":10},"generated":{"line":1,"column":866}},{"source":"index.js","name":"author","original":{"line":60,"column":19},"generated":{"line":1,"column":874}},{"source":"index.js","name":"msg","original":{"line":60,"column":30},"generated":{"line":1,"column":876}},{"source":"index.js","name":"author","original":{"line":60,"column":19},"generated":{"line":1,"column":878}},{"source":"index.js","name":"ul","original":{"line":61,"column":2},"generated":{"line":1,"column":885}},{"source":"index.js","name":"innerHTML","original":{"line":61,"column":5},"generated":{"line":1,"column":887}},{"source":"index.js","name":"author","original":{"line":61,"column":25},"generated":{"line":1,"column":898}},{"source":"index.js","name":"author","original":{"line":61,"column":25},"generated":{"line":1,"column":905}},{"source":"index.js","name":"author","original":{"line":61,"column":25},"generated":{"line":1,"column":912}},{"source":"index.js","name":"message","original":{"line":61,"column":36},"generated":{"line":1,"column":914}},{"source":"index.js","name":"message","original":{"line":61,"column":36},"generated":{"line":1,"column":920}},{"source":"index.js","name":"message","original":{"line":61,"column":36},"generated":{"line":1,"column":927}},{"source":"index.js","original":{"line":61,"column":2},"generated":{"line":1,"column":929}},{"source":"index.js","name":"typingInfo","original":{"line":62,"column":2},"generated":{"line":1,"column":938}},{"source":"index.js","name":"textContent","original":{"line":62,"column":13},"generated":{"line":1,"column":940}},{"source":"index.js","original":{"line":62,"column":27},"generated":{"line":1,"column":952}},{"source":"index.js","name":"askForName","original":{"line":65,"column":0},"generated":{"line":1,"column":955}},{"source":"index.js","name":"form","original":{"line":67,"column":0},"generated":{"line":1,"column":959}},{"source":"index.js","name":"addEventListener","original":{"line":67,"column":5},"generated":{"line":1,"column":961}},{"source":"index.js","original":{"line":67,"column":22},"generated":{"line":1,"column":978}},{"source":"index.js","name":"handleFormSubmission","original":{"line":67,"column":32},"generated":{"line":1,"column":987}},{"source":"index.js","name":"mess","original":{"line":68,"column":0},"generated":{"line":1,"column":990}},{"source":"index.js","name":"addEventListener","original":{"line":68,"column":5},"generated":{"line":1,"column":992}},{"source":"index.js","original":{"line":68,"column":22},"generated":{"line":1,"column":1009}},{"source":"index.js","original":{"line":68,"column":31},"generated":{"line":1,"column":1017}},{"source":"index.js","name":"userTyping","original":{"line":69,"column":2},"generated":{"line":1,"column":1028}},{"source":"index.js","original":{"line":69,"column":13},"generated":{"line":1,"column":1030}},{"source":"index.js","name":"socket","original":{"line":72,"column":0},"generated":{"line":1,"column":1038}},{"source":"index.js","name":"on","original":{"line":72,"column":7},"generated":{"line":1,"column":1040}},{"source":"index.js","original":{"line":72,"column":10},"generated":{"line":1,"column":1043}},{"source":"index.js","name":"addChatMessage","original":{"line":72,"column":26},"generated":{"line":1,"column":1058}},{"source":"index.js","name":"socket","original":{"line":73,"column":0},"generated":{"line":1,"column":1061}},{"source":"index.js","name":"on","original":{"line":73,"column":7},"generated":{"line":1,"column":1063}},{"source":"index.js","original":{"line":73,"column":10},"generated":{"line":1,"column":1066}},{"source":"index.js","name":"addTypingInfo","original":{"line":73,"column":25},"generated":{"line":1,"column":1080}},{"source":"index.js","name":"socket","original":{"line":74,"column":0},"generated":{"line":1,"column":1083}},{"source":"index.js","name":"on","original":{"line":74,"column":7},"generated":{"line":1,"column":1085}},{"source":"index.js","original":{"line":74,"column":10},"generated":{"line":1,"column":1088}},{"source":"index.js","name":"newUserUpdate","original":{"line":74,"column":22},"generated":{"line":1,"column":1099}}],"sources":{"index.js":"import io from 'socket.io-client';\r\n\r\nconst socket = io();\r\nconst form = document.querySelector('form');\r\nconst mess = document.querySelector('#m');\r\nconst nick = document.querySelector('#n');\r\nconst ul = document.querySelector('.messages');\r\nconst typingInfo = document.querySelector('.typing');\r\n\r\nconst user = {\r\n  // name: '',\r\n  // status: '',\r\n};\r\n\r\nfunction askForName() {\r\n  user.name = prompt('enter your name');\r\n  if (user.name != '') {\r\n    socket.emit('user login', user.name);\r\n  }\r\n  nick.value = user.name;\r\n}\r\n\r\nfunction typingTimeout() {\r\n  // typing = false;\r\n  socket.emit('user typing', { typing: false });\r\n}\r\n\r\nconst userTyping = (function () {\r\n  let timeout = null;\r\n  return function (delay) {\r\n    socket.emit('user typing', { typing: true, user: user.name });\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(typingTimeout, delay);\r\n  };\r\n})();\r\n\r\nfunction addTypingInfo({ typing, user }) {\r\n  if (typing) {\r\n    typingInfo.textContent = `${user} is typing...`;\r\n  } else {\r\n    typingInfo.textContent = '';\r\n  }\r\n}\r\n\r\nfunction newUserUpdate() {\r\n  console.log('new user joined');\r\n}\r\n\r\nfunction handleFormSubmission(e) {\r\n  e.preventDefault();\r\n  if (mess.value != '' && nick.value != '') {\r\n    const data = { message: mess.value, author: nick.value };\r\n    mess.value = '';\r\n    socket.emit('chat message', data);\r\n    // return false;\r\n  }\r\n}\r\n\r\nfunction addChatMessage(msg) {\r\n  const { message, author } = msg;\r\n  ul.innerHTML += `<li>${author}: ${message}</li>`;\r\n  typingInfo.textContent = '';\r\n}\r\n\r\naskForName();\r\n\r\nform.addEventListener('submit', handleFormSubmission);\r\nmess.addEventListener('input', () => {\r\n  userTyping(1500);\r\n});\r\n\r\nsocket.on('chat message', addChatMessage);\r\nsocket.on('user typing', addTypingInfo);\r\nsocket.on('new user', newUserUpdate);\r\n"},"lineCount":null}},"error":null,"hash":"b03e4a1cd16d8c9916dbd3145ba37803","cacheData":{"env":{}}}